# Parameter Analysis Report

**Analysis Date**: 2026-01-20  
**Dataset**: 10 sample videos from downloads folder  
**Total Frames Analyzed**: 1,500

## Executive Summary

Based on comprehensive analysis of your security camera footage, the optimal parameters are:

```python
MOTION_THRESHOLD_PERCENTAGE = 0.015  # ~0.015%
COOLDOWN_SECONDS = 1.5
MOTION_RESOLUTION = (640, 360)
```

**Expected Performance**: ~5-8 labeled samples per 10-second video clip

## Dataset Characteristics

### Video Properties
- **Format**: 2560x1440 @ ~15 FPS
- **Duration**: Average 10 seconds per clip
- **Type**: Static security camera footage

### Motion Analysis Results

| Metric | Value |
|--------|-------|
| Max Motion | 0.608% |
| Mean Motion | 0.005% |
| Median Motion | 0.000% |
| 95th Percentile | 0.015% |
| 99th Percentile | 0.171% |

### Frame Distribution by Threshold

| Threshold | Frames Captured | Percentage |
|-----------|-----------------|------------|
| 0.001% | 111 | 7.40% |
| 0.005% | 96 | 6.40% |
| 0.010% | 86 | 5.73% |
| **0.015%** | **~76** | **~5%** ⭐ |
| 0.050% | 44 | 2.93% |
| 0.100% | 24 | 1.60% |
| 0.500% | 1 | 0.07% |

⭐ = Recommended default

## Reasoning for Recommended Parameters

### MOTION_THRESHOLD_PERCENTAGE = 0.015

**Why this value?**
- Captures the top 5% most active frames
- Balances between capturing motion and avoiding noise
- Based on 95th percentile of actual motion in your videos
- Original default (0.5%) was **33x too high** for your dataset

**What this means:**
- Frames with ≥0.015% pixel change will trigger AI detection
- Expects ~5-8 frames per video to meet this threshold
- Filters out 95% of static/nearly-static frames

### COOLDOWN_SECONDS = 1.5

**Why this value?**
- At 15 FPS, 1.5 seconds = 22-23 frames
- Prevents capturing the same event multiple times
- Shorter than original (2.0s) to capture more diversity
- Balances duplicate prevention with coverage

**What this means:**
- After finding a cat, skip ahead 1.5 seconds
- Allows capturing a cat entering and leaving frame in same video
- Prevents wasting AI inference on duplicate frames

### MOTION_RESOLUTION = (640, 360)

**Why this value?**
- Fast motion detection (processed 1,500 frames quickly)
- Doesn't affect final image quality (only for motion check)
- Good balance of accuracy and speed

## Alternative Configurations

### Option A: Aggressive (More Samples)
```python
MOTION_THRESHOLD_PERCENTAGE = 0.001
COOLDOWN_SECONDS = 1.0
```
- **Captures**: ~7% of frames
- **Use when**: You want maximum coverage
- **Tradeoff**: More processing time, potential duplicates

### Option B: Moderate (Recommended) ⭐
```python
MOTION_THRESHOLD_PERCENTAGE = 0.015
COOLDOWN_SECONDS = 1.5
```
- **Captures**: ~5% of frames
- **Use when**: Default for most cases
- **Tradeoff**: Best balance

### Option C: Conservative (High Motion Only)
```python
MOTION_THRESHOLD_PERCENTAGE = 0.17
COOLDOWN_SECONDS = 2.0
```
- **Captures**: ~1% of frames (only top 1%)
- **Use when**: You only want clear, significant motion
- **Tradeoff**: Might miss some events

## Performance Impact

### Before Optimization (Default 0.5%)
- Frames processed: ~1 per 1,500 (0.07%)
- Likely result: **No samples generated**
- Problem: Threshold too high for static cameras

### After Optimization (0.015%)
- Frames processed: ~76 per 1,500 (5%)
- Expected result: **Good sample coverage**
- Benefit: Captures actual motion events

## Testing Validation

The code was tested with:
1. ✅ Motion detection algorithm (verified correct)
2. ✅ Cooldown mechanism (prevents duplicates)
3. ✅ Frame jumping (works efficiently)
4. ✅ Edge cases (null frames, identical frames)
5. ✅ **Real video analysis (10 videos, 1,500 frames)**

## Recommendations

1. **Use the optimized parameters** - They're tuned for your specific dataset
2. **Monitor first run** - Check how many samples are generated
3. **Adjust if needed** - See "Alternative Configurations" above
4. **Consider full version** - If videos have NO motion (all static), use `create_full_training_set.py`

## Technical Notes

- Analysis used same motion detection algorithm as production code
- Gaussian blur (21x21) reduces noise from compression artifacts
- Threshold of 25 on grayscale delta (0-255 range)
- All percentiles calculated from actual motion scores

---

**Generated by**: Comprehensive video analysis script  
**Confidence**: High - Based on empirical data from your actual videos
